# webアプリケーション開発

## アプリケーション概要
サッカーにおける、イングランドのリーグ内で活躍する選手を検索することができるWEBアプリです。
様々な条件で絞って検索できることが強みです！

## 制作背景
Go言語に魅力を感じ、まずはGo言語に関する書籍を全て購入して勉強していました。
しかし、インプットの量に対しアウトプットが少ないと感じたため、簡単なWEBアプリを作成してみようと思い、この検索アプリを作成しました！
WEBアプリ開発を通じて、セキュリティ対策やRMDB周りやコンテナ技術なども学べれば一石二鳥だと思い、まずは手を動かしてみることにしました。

## 開発言語や使用技術
フロントエンド  :HTML, CSS, JavaScript  
バックエンド    :Go  
データベース    :MySQL(ツール:MySQLworkbench)  
コンテナ       :Docker  
バージョン管理  :Git, GitHub  
エディタ       :VSCode

## 強みだと思う部分
### フロントエンド
#### ①検索条件  
PlayStation5のFIFA（サッカーのゲーム）などをプレイしていると一部機能で選手検索ができるのですが、この選手検索がWEBアプリでもできたらと思っていました。FIFAの選手検索でも選択した項目によってチームエンブレムや選手の顔写真などが変化するのですが、ユーザー視点からしてもわかりやすくとても良いUIだなと思ったので取り入れました。フロントで変化させるのでJSでコーディングしてみました。

### バックエンド
#### ①会員登録・ログイン機能  
言語によってはDBにアクセスする際、接続のたびにコネクションを作成したりするものもあり、処理時間に大きく影響します。しかしGo言語はアプリ開始時にコネクションを一度開くだけで良いため、処理時間の短縮にもなっています。そのため多くいるサッカー選手をクエリで取得する際も、短時間で取得可能です。

#### ②セッション・Cookieによる認証機能  
最近のWEBサイトはほとんどがCookieにセッションを管理しており、ログインしてから数時間、数日は再ログインする手間を省いています。Go言語には3rdパッケージにGorilla/sessionsという便利なセッション管理のパッケージが存在します。それを使用することでログインセッションが存在するユーザーに対してはログイン画面を省略してメイン画面に遷移するなどの工夫を行いました。
（Go言語をバックエンドに選定した理由の1つとして、標準パッケージやその他のパッケージが他の言語と比べて便利なためです。）

#### ③セキュリティ  
あまり詳しくないのですが、一般的なセキュリティ対策を意識して開発しました。大体はパッケージなどが予め対策してくれているなという印象です。以下はプレミアリーグ選手検索アプリに対して行なった、一般的な攻撃に対するセキュリティ対策です。  
  
### ・XSS（クロスサイトスクリプト）  
入力フォームに入力した文字列を画面上に表示する際、悪意のある攻撃を避けるため「<」や「>」を「&lt;」や「&gt;」にエスケープする必要があります。Go言語のhtml/templateパッケージではパッケージ内でエスケープ処理を行なってくれるため、開発者はエスケープ処理のコードを書かなくても良くなっています。このプレミアリーグ選手検索アプリでは、ユーザーが入力した文字列を画面へ表示する際、全てhtml/templateをパッケージを使用しているため、XSSの攻撃を避けることができます。  
また、少しでも悪意のあるコードを記載できなくするため、入力フォームに文字数制限をかけるなどを行いました。

### ・SQLインジェクション
こちらもXSS同様、DBから取り出したデータは全てhtml/templateに組み込んでHTMLを作成しているので、悪意のあるソースが実行されることはありません。

### ・URLの直打ち
URLを直接打ちこむことでログイン後のメイン画面に直接アクセスしようとする攻撃です。これに対してはログインセッションの有無で判定を行い、無ければログイン画面を表示させています。

### ・DBへの登録
（最近はそのような脆弱性はもうないと思いますが）パスワードを平文でDBに登録しないことです。これに対してはx/crypto/bcryptパッケージを使用し、パスワードをハッシュ化して登録を行なっています。

## 苦労した部分
#### ①WEBアプリの設計  
WEBアプリを開発する上で気をつけるべきポイントがわからなかったことです。
contextによるgoroutine間のエラーの伝播など、設計段階でどのようにしていくのが良いのかわからず書籍を見直したり、ネットで検索したりと、時間がかかってしまいました。

#### ②バグの解消  
Cookieが無視されてしまうバグがあり、解消に1日かかってしまいました。
原因としては、net/httpのredirectでページ遷移した場合、SetCookieが無視されてしまうことでした。
全てhtml/templateによるページ遷移に変更することで対応しました。

#### ③フロントエンドの勉強時間  
最初はGo言語の知識を増やす目的で開発を行っていましたが、こだわりだしたら止まらないタイプの人間なので、
サイトを少しでもおしゃれにしようとUIの部分であるCSSの勉強にかなりの時間を使ってしまいました。